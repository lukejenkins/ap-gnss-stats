# Known Issues and Workarounds

This document describes known issues in the ap-gnss-stats tool and their workarounds.

## Netmiko Hostname Truncation

### Issue Description

When connecting to Cisco APs via SSH using Netmiko, the library's `base_prompt` property sometimes truncates AP hostnames. This truncation primarily occurs with hostnames containing hyphens where the final segment is a single character or short string.

**Example of truncation:**

- Original hostname: `abcdef-outdoor-ap1`
- Truncated by Netmiko: `abcdef-outdoor-a`

This truncation affects:

1. Output filenames generated by the tool
2. The `main_ap_name` field in the parsed data

### Implemented Solution

The tool now implements detection and reconstruction logic for truncated hostnames:

1. **Detection criteria:**
   - Hostname contains a hyphen
   - Last segment after the final hyphen is only 1-2 characters long
   - Original AP address is available for cross-checking

2. **Reconstruction method:**
   - Extract the hostname portion from the original FQDN (e.g., "ogxwsc-outdoor-ap1" from "ogxwsc-outdoor-ap1.mgmt.weber.edu")
   - Verify the extracted hostname is compatible with the truncated version
   - Use the full hostname in place of the truncated one

3. **Implementation locations:**
   - `ap_ssh_collector.py`: For correcting output filenames
   - `gnss_info_parser.py`: For correcting the `main_ap_name` field in parsed data

### Technical Details

Netmiko's truncation behavior appears to be related to internal string manipulation when processing command output. The truncation seems to occur consistently with hostnames that follow certain patterns, particularly those with hyphens and short final segments.

### Testing Affected Hostnames

If you suspect an AP's hostname is being truncated, you can test it explicitly by running:

```bash
python3 ap_ssh_collector.py -a your-hostname-here.domain.com -u username
```

Check the log files for messages indicating truncation detection:

```pl
Detected truncated hostname. Original base_prompt: 'hostname-a' (length: 10)
Using original hostname from AP address: 'hostname-ap1' (length: 12)
```

## Other Known Issues

*This section will be populated as other issues are discovered and documented.*
